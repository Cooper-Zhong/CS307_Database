# CS307-Database Project 1

Group session: Thursday 3-4

Name(SID): 钟志源(12110517)、刘浩贤(12111515)

Contribution: 钟志源（Database Design、Data Import）刘浩贤（E-R Diagram、 Database Design）

percentages of contributions： 50% : 50%

#### Task 1: E-R Diagram

- The E-R Diagram is draw with [diagrams.net](https://app.diagrams.net/)

<img src="C:\Users\25375\Desktop\DB\CS307_Database\project1\Report\E-R Diagram.png" alt="E-R Diagram" style="zoom: 33%;" />

#### Task 2: Relational Database Design

- The E-R diagram generated by DataGrip

<img src="C:\Users\25375\Desktop\DB\CS307_Database\project1\Report\Visualization.png" alt="Visualization" style="zoom: 25%;" />

- **The create table statements is attached with `CreateTable.sql`**
- **Briefly describe the table designs and the meanings of each table and column.**

1. **Table Name: authors (Entity set)**
   - Description: This table stores information about authors, including their ID, name, registration time, phone number, and ID card.
   - Columns:
     - author_id: a unique identifier for each author, automatically incremented by the system (SERIAL type)
     - author_name: the author's name (text type, not null and unique, **primary key**)
     - author_registration_time: the date and time when the author registered (TIMESTAMP type)
     - author_phone: the author's phone number (text type)
     - author_id_card: the author's identification card number (text type)
2. Table Name: posts (Entity set)
   - Description: This table stores information about posts made by authors, including the post's title, content, posting time, location, and the author who made the post.
   - Columns:
     - post_id: a unique identifier for each post, automatically incremented by the system (SERIAL type, **primary key**)
     - title: the title of the post (text type, not null)
     - content: the content of the post (text type, not null)
     - post_time: the date and time when the post was published (TIMESTAMP type)
     - post_city: the city where the post was published (text type)
     - author_name: the name of the author who published the post (text type, foreign key to authors.author_name, not null)
3. **Table Name: categories (Entity set)**
   - Description: This table stores information about post categories, including the category's ID and name.
   - Columns:
     - category_id: a unique identifier for each category, automatically incremented by the system (SERIAL type)
     - category_name: the name of the category (text type, not null and unique, **primary key**)
4. **Table Name: post_category (Relationship set)**
   - Description: This table represents the many-to-many relationship between posts and categories. Each row represents a post and its associated category.
   - Columns:
     - post_id: the id of the post (integer type, foreign key to posts.post_id)
     - category_name: the name of the category (text type, foreign key to categories.category_name)
   - **Primary Key**: (post_id, category_name)
5. **Table Name: author_followers (Relationship set)**
   - Description: This table represents the many-to-many relationship between authors and their followers. Each row represents an author and their follower.
   - Columns:
     - author_name: the name of the author being followed (text type, foreign key to authors.author_name)
     - follower_name: the name of the follower (text type, foreign key to authors.author_name, not null)
   - **Primary Key**: (author_name, follower_name)
6. **Table Name: post_favorites (Relationship set)**
   - Description: This table represents the many-to-many relationship between authors and their followers. Each row represents an author and their follower.
   - Columns:
     - post_id: the id of the post being favorited (integer type, foreign key to posts.post_id)
     - favorite_author_name: the name of the author who favorited the post (text type, foreign key to authors.author_name, not null)
   - **Primary Key**: (post_id, favorite_author_name)
7. **Table Name: author_shared_posts (Relationship set)**
   - Description: This table represents the many-to-many relationship between authors and posts that they have shared. Each row represents a post and the author who shared it.
   - Columns:
     - post_id: the id of the post being shared (integer type, foreign key to posts.post_id)
     - shared_author_name: the name of the author who shared the post (text type, foreign key to authors.author_name, not null)
   - **Primary Key**: (post_id, shared_author_name)
8. **Table Name: author_liked_posts (Relationship set)**
   - Description: This table represents the many-to-many relationship between authors and posts that they have liked. Each row represents a post and the author who liked it.
   - Columns:
     - post_id: the id of the post being liked (integer type, foreign key to posts.post_id)
     - liked_author_name: the name of the author who liked the post (text type, foreign key to authors.author_name, not null)
   - **Primary Key**: (post_id, liked_author_name)
9. **Table Name: first_replies (Entity set)**
   - Description: This table stores information about the first reply to a post, including the reply's ID, content, rating, and author.
   - Columns:
     - post_id: the id of the post being replied to (integer type, foreign key to posts.post_id)
     - first_id: a unique identifier for each first reply, automatically incremented by the system (SERIAL type, **primary key**)
     - first_content: the content of the first reply (text type, not null)
     - first_stars: the number of stars received by the first reply (integer type)
     - first_author: the name of the author who wrote the first reply (text type, foreign key to authors.author_name, not null)
10. **Table Name: second_replies (Entity set)**
    - Description: This table stores information about the second reply to a post, including the reply's ID, content, rating, and author, as well as the ID of the first reply that it is associated with.
    - Columns:
      - second_id: a unique identifier for each second reply, automatically incremented by the system (SERIAL type, **primary key**)
      - first_id: the id of the first reply being replied to (integer type, foreign key to first_replies.first_id)
      - second_content: the content of the second reply (text type, not null)
      - second_stars: the number of stars received by the second reply (integer type)
      - second_author: the name of the author who wrote the second reply (text type, foreign key to authors.author_name, not null)